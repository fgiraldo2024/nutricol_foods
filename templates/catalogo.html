{% extends "base.html" %}

{% block title %}Cat치logo de Productos - Nutricol Foods{% endblock %}

{% block content %}
  <div class="text-center my-5">

    <!-- Logo arriba, centrado -->
    <div class="text-center mb-4">
      <img src="{{ url_for('static', filename='img/logo_nutricol_transparent.png') }}" 
           alt="Logo Nutricol Foods" 
           style="max-width: 180px; height: auto; margin-bottom: 15px;">
      <h1 class="mb-0">Cat치logo de Productos</h1>
    </div>

    <!-- Contenedor del cat치logo -->
    <main class="container">
      <div id="catalogo" class="grid row g-4 justify-content-center"></div>
    </main>

  </div>

  <style>
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 18px;
    }
    .card {
      background:#fff; border-radius:14px;
      box-shadow:0 6px 14px rgba(0,0,0,.08);
      padding:14px; text-align:center;
      transition: transform .2s ease;
    }
    .card:hover { transform: translateY(-4px); }
    .card img { width:100%; height:200px; object-fit: contain; }
    .titulo { margin:10px 0 4px; font-weight:700; }
    .descripcion { font-size:.95rem; color:#333; min-height:38px; }
    .precio { margin-top:8px; color:#2E8B57; font-weight:700; }
  </style>

  <script>
    const jsonUrl = "{{ url_for('static', filename='data/catalogo.json') }}";
    const imgBase = "{{ url_for('static', filename='img/catalogo/') }}";

    async function cargarCatalogo(){
      try {
        const resp = await fetch(jsonUrl, {cache:'no-store'});
        const productos = await resp.json();
        const grid = document.getElementById('catalogo');
        grid.innerHTML = '';

        productos.forEach(p => {
          const el = document.createElement('div');
          el.className = 'card';
          el.innerHTML = `
            <img src="${imgBase}${p.imagen}" loading="lazy" alt="${p.titulo}">
            <div class="titulo">${p.titulo}</div>
            <div class="descripcion">${p.descripcion}</div>
            <div class="precio">${p.precio}</div>
          `;
          grid.appendChild(el);
        });
      } catch (e){
        document.getElementById('catalogo').innerHTML = '<p>Error cargando el cat치logo.</p>';
        console.error(e);
      }
    }
    cargarCatalogo();
  </script>
{% endblock %}
